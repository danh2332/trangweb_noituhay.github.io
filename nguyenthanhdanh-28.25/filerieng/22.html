<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>üî• N·ªëi T·ª´ 2 Ng∆∞·ªùi üî•</title>
<style>
    body {
      font-family: 'Times New Roman', Times, serif;
      background: linear-gradient(210deg, #f904e0 30%,#fafaf9 50%, #6664d8 70%);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .container {
      background-color: #fff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      text-align: center;
      width: 400px;
    }

    h1 {
        text-align: center;
        margin-bottom: 30px;
        animation: blinkColor 1s infinite;
        font-weight: bold;
        }
        @keyframes blinkColor {
                0% { 
                    opacity: 1; 
                    color: #7d2828;
                }
                25% { 
                    opacity: 0.6; 
                    color: #cb3277;
                }
                50% { 
                    opacity: 1; 
                    color: #163916;
                }
                75% { 
                    opacity: 0.6; 
                    color: #2121ac;
                }
                100% { 
                    opacity: 1; 
                    color: #aa5e5e;
                }
            }

    .info {
      margin-bottom: 10px;
      font-size: 18px;
    }

    .info span {
      font-weight: bold;
      color: #e91e63;
    }

    input {
      width: 80%;
      padding: 12px;
      margin-bottom: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      text-align: center;
    }

    button {
      background-color: #4caf50;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #45a049;
    }

    #message {
      margin-top: 15px;
      font-size: 16px;
      min-height: 24px;
    }

    .success { color: #4caf50; }
    .error { color: #f44336; }

    .timer {
      font-size: 24px;
      margin-top: 10px;
      color: #ff5722;
      font-weight: bold;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>N·ªëi T·ª´ 2 Ng∆∞·ªùi</h1>

    <div class="info">L∆∞·ª£t: <span id="player-turn">Ng∆∞·ªùi ch∆°i 1</span></div>
    <div class="info">T·ª´ hi·ªán t·∫°i: <span id="current-word">b·∫Øt ƒë·∫ßu</span></div>
    <div class="info">Ph·∫£i b·∫Øt ƒë·∫ßu b·∫±ng: <span id="next-word">ƒë·∫ßu</span></div>

    <div class="info">ƒêi·ªÉm Ng∆∞·ªùi ch∆°i 1: <span id="score1">0</span></div>
    <div class="info">ƒêi·ªÉm Ng∆∞·ªùi ch∆°i 2: <span id="score2">0</span></div>

    <div class="timer">‚è∞ <span id="timer">30</span> gi√¢y</div>

    <input type="text" id="word-input" placeholder="Nh·∫≠p t·ª´ ti·∫øp theo..." onkeydown="if(event.key==='Enter') submitWord()">
    <button onclick="submitWord()">N·ªëi T·ª´</button>

    <div id="message"></div>
  </div>

  <script>
    const tuTiengViet = [
      "b·∫Øt ƒë·∫ßu", "ƒë·∫ßu ti√™n", "ti√™n phong", "phong c·∫£nh", "c·∫£nh ƒë·∫πp",,"chi·∫øc xe","c√°i gh·∫ø","ƒë√¥i d√©p","b√∫t ch√¨","qu·∫£ t√°o","l√° c√¢y","ƒë√®n pin","c√°i k√©o","con v·ªãt","m∆∞a r√†o","n·∫Øng s·ªõm"
      ,"ƒë·∫πp trai", "trai l√†ng", "l√†ng qu√™", "qu√™ h∆∞∆°ng", "h∆∞∆°ng th∆°m","qu·∫£ cam","ng√¥i nh√†","c√°i b√†n","quy·ªÉn s√°ch","b√¥ng hoa"

    ];

    let currentWord = "b·∫Øt ƒë·∫ßu";
    let currentPlayer = 1;
    let score1 = 0;
    let score2 = 0;
    let usedWords = [currentWord];
    let timer;
    let timeLeft = 30;

    function getLastWord(str) {
      const words = str.trim().split(" ");
      return words[words.length - 1]; // t·ª´ cu·ªëi c√πng
    }

    function getFirstWord(str) {
      const words = str.trim().split(" ");
      return words[0]; // t·ª´ ƒë·∫ßu ti√™n
    }

    //  Ki·ªÉm tra l·∫∑p t·ª´ (nhau nhau, o o, ...)
    function isDuplicatedWord(word) {
      const words = word.trim().split(" ");
      if (words.length === 2 && words[0] === words[1]) {
        return true; // L·∫∑p t·ª´ gi·ªëng nhau
      }
      return false;
    }

    function submitWord() {
      const input = document.getElementById('word-input');
      const newWord = input.value.trim().toLowerCase();

      if (newWord === "") {
        showMessage("‚ö†Ô∏è B·∫°n ch∆∞a nh·∫≠p t·ª´!", "error");
        return;
      }

      //  Ki·ªÉm tra nh·∫≠p ƒë√∫ng 2 t·ª´
      const wordParts = newWord.split(" ");
        if (wordParts.length !== 2) {
        showMessage("‚ùå B·∫°n ch·ªâ ƒë∆∞·ª£c nh·∫≠p ƒë√∫ng 2 t·ª´!", "error");
        return;
      }


      //  Ki·ªÉm tra t·ª´ l·∫∑p gi·ªëng nhau
      if (isDuplicatedWord(newWord)) {
        showMessage("‚ùå Kh√¥ng ƒë∆∞·ª£c nh·∫≠p t·ª´ l·∫∑p gi·ªëng nhau!", "error");
        return;
      }

      // Ki·ªÉm tra ƒë√£ d√πng ch∆∞a
      if (usedWords.includes(newWord)) {
        endGame(`‚ùå T·ª´ "${newWord}" ƒë√£ ƒë∆∞·ª£c d√πng r·ªìi! Ng∆∞·ªùi ch∆°i ${currentPlayer} thua!`);
        return;
      }

      const lastWord = getLastWord(currentWord);
      const firstWord = getFirstWord(newWord);

      if (firstWord !== lastWord) {
        endGame(`‚ùå Sai! T·ª´ m·ªõi ph·∫£i b·∫Øt ƒë·∫ßu b·∫±ng "${lastWord}". Ng∆∞·ªùi ch∆°i ${currentPlayer} thua!`);
        return;
      }

      //  H·ª£p l·ªá
      currentWord = newWord;
      usedWords.push(newWord);

      if (currentPlayer === 1) {
        score1++;
        document.getElementById('score1').innerText = score1;
        currentPlayer = 2;
      } else {
        score2++;
        document.getElementById('score2').innerText = score2;
        currentPlayer = 1;
      }

      document.getElementById('current-word').innerText = currentWord;
      document.getElementById('next-word').innerText = getLastWord(currentWord);
      document.getElementById('player-turn').innerText = `Ng∆∞·ªùi ch∆°i ${currentPlayer}`;

      input.value = "";
      showMessage("‚úÖ Ch√≠nh x√°c!", "success");

      startTimer();
    }

    function endGame(message) {
      showMessage(message, "error");
      clearInterval(timer);

      alert(message);

      // Reset game v·ªõi t·ª´ m·ªõi t·ª´ danh s√°ch
      currentWord = getRandomWord();
      usedWords = [currentWord];
      score1 = 0;
      score2 = 0;
      currentPlayer = 1;

      document.getElementById('current-word').innerText = currentWord;
      document.getElementById('next-word').innerText = getLastWord(currentWord);
      document.getElementById('score1').innerText = score1;
      document.getElementById('score2').innerText = score2;
      document.getElementById('player-turn').innerText = `Ng∆∞·ªùi ch∆°i ${currentPlayer}`;

      startTimer();
    }

    function getRandomWord() {
      const index = Math.floor(Math.random() * tuTiengViet.length);
      return tuTiengViet[index];
    }

    function showMessage(msg, type) {
      const messageDiv = document.getElementById('message');
      messageDiv.innerText = msg;

      if (type === "success") {
        messageDiv.classList.remove('error');
        messageDiv.classList.add('success');
      } else {
        messageDiv.classList.remove('success');
        messageDiv.classList.add('error');
      }

      setTimeout(() => {
        messageDiv.innerText = "";
      }, 3000);
    }

    function startTimer() {
      clearInterval(timer);
      timeLeft = 30;
      document.getElementById('timer').innerText = timeLeft;

      timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').innerText = timeLeft;

        if (timeLeft === 0) {
          clearInterval(timer);
          endGame(`‚è∞ H·∫øt gi·ªù! Ng∆∞·ªùi ch∆°i ${currentPlayer} thua!`);
        }
      }, 1000);
    }

    window.onload = () => {
      currentWord = getRandomWord();
      usedWords = [currentWord];
      document.getElementById('current-word').innerText = currentWord;
      document.getElementById('next-word').innerText = getLastWord(currentWord);
      startTimer();
    };
  </script>
</body>
</html>